- pipeline: "Build and make it public"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  ref_type: "BRANCH"
  fetch_all_refs: true
  trigger_condition: "ALWAYS"
  actions:
  - action: "Install and build"
    type: "BUILD"
    docker_image_name: "library/node"
    docker_image_tag: "12"
    execute_commands:
    - "npm install"
    - "npm run build"
    trigger_condition: "ALWAYS"
    shell: "SH"
  - action: "Upload files"
    type: "SFTP"
    input_type: "BUILD_ARTIFACTS"
    local_path: "public/"
    remote_path: "/var/www/html/"
    login: "root"
    host: "${SERVER_NAME}"
    port: "22"
    env_key: "test_rsa"
    authentication_mode: "ENV_KEY"
